generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model Quiz {
  id          String     @id @default(uuid())
  title       String
  description String?

  questions   Question[] @relation("QuizQuestions")

  createdAt   DateTime   @default(now()) @map("created_at")
  updatedAt   DateTime   @updatedAt @map("updated_at")

  @@index([title])
  @@map("quizzes")
}

model Question {
  id        String       @id @default(uuid())
  text      String
  type      QuestionType @default(BOOLEAN)

  quiz      Quiz         @relation("QuizQuestions", fields: [quizId], references: [id], onDelete: Cascade)
  quizId    String       @map("quiz_id")

  answers   Answer[]     @relation("QuestionAnswers")

  createdAt DateTime     @default(now()) @map("created_at")
  updatedAt DateTime     @updatedAt @map("updated_at")

  @@map("questions")
}

model Answer {
  id        String   @id @default(uuid())
  text      String
  isCorrect Boolean  @default(false)

  question  Question @relation("QuestionAnswers", fields: [questionId], references: [id], onDelete: Cascade)
  questionId String  @map("question_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("answers")
}

enum QuestionType {
  BOOLEAN
  INPUT
  CHECKBOX

  @@map("question_type")
}
